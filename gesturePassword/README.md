# 功能
>实现一个移动网页，允许用户设置手势密码和验证手势密码。已设置的密码记录在本地 localStorage 中。

1. 设置密码:用户选择设置密码，提示用户输入手势密码
2. 密码长度太短:如果不足 5 个点，提示用户密码太短
3. 再次输入密码:提示用户再次输入密码
4. 两次密码输入不一致:如果用户输入的两次密码不一致，提示并重置，重新开始设置密码
5.  密码设置成功:如果两次输入一致，密码设置成功，更新 localStorage
6.  验证密码 - 不正确:切换单选框进入验证密码模式，将用户输入的密码与保存的密码相比较，如果不一致，则提示输入密码不正确，重置为等待用户输入。
7.  验证密码 - 正确:
如果用户输入的密码与 localStorage 中保存的密码一致，则提示密码正确。


# 方案一 expire
>canvas作为图层蒙版遮罩住DOM节点之后，无法在DOM结点上检测到事件。

## 一、 布局
1. 使用flexbox布局手势密码区，其实没必要，我就想练习一下弹性盒模型；
2. 图标和包裹区都是定宽的，担心不一样的设备自适应图标可能会有点丑丑的。

## 二、 设置密码
**设置密码过程**
1. 监听小圆圈上touchstart事件，只要触摸的是其中一个小圆圈，立即为其添加样式表示选择；
2. 监听touchmove事件，动态获取手指当前触摸点的坐标。画一条连接上一个选中点到触摸点的线段；
3. 监听touchend事件，若此时触摸点在某一个小圆圈内，将其置为选择点，否则取消当前线段；
4. 选择过的点不能重复选择。

**密码设置完毕**
1. 选择点至少5个，否则提示“密码长度太短”；
2. 密码设置成功，保存到LocalStorage；


# 方案二：
## 一、 布局
1. 使用canvas绘制手势密码区；
	1. canvas的宽高均为设备的宽度，程正方形置于页面顶部；
	2. 圆圈与圆圈之间的间隔相等，每个圆圈/间隔均占宽度的1/7，因此圆圈半径为宽度的1/14；
2. 选项及提示使用DOM元素。

## 二、 设置密码
**第一次输入密码**
1. 监听小圆圈上touchstart事件，只要触摸的是其中一个小圆圈，立即为其添加样式表示选择，并加入已选择的点的数组；
2. 监听touchmove事件，动态获取手指当前触摸点的坐标。画一条连接上一个选中点到触摸点的线段；
3. 监听touchend事件，若此时触摸点在某一个小圆圈内，将其置为选择点，否则取消当前线段。
4. 选择过的点不能重复选择。

**第一次输入密码完毕**
1. 选择点至少5个，否则提示“密码长度太短”并重新输入密码；
2. 若满足5个及以上点的选取，进行第二次密码输入【确认密码】。

**第二次输入密码-确认密码**
1. 输入过程同第一次；
2. 若第二次输入密码与第一次相同，显示密码设置成功，保存到LocalStorage；
3. 否则重新进行第一次密码输入。

## 三、 验证密码
1. 输入过程同设置密码；
2. 将设置好的密码从localStorage中取出并与输入密码进行对比，若本地未保存密码，提醒用户先设置密码；
3. 若输入与本地保存的密码相同，显示密码正确，否则回到1。

## 四、时间轴
### 2017/03/28
1. 基本设置密码功能已完成；
2. password对象数组无法return到主函数，作为参数传递出去也无法成功设置。

### 2017/03/29 1:00
1. 所有功能全部实现；
2. 300行代码量太大，下一步需要优化代码。

### 2017/03/29 19:10
1. 加了一个对用户比较友好的延时；
2. 代码量也缩减了哈哈哈。